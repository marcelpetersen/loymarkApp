<ion-view cache-view="true">
	<!-- <ion-nav-title>
		<img src="img/kenuulogo.png" alt="" class="top-bar-logo">
	</ion-nav-title> -->
	<ion-content class="commercewr-content" overflow-scroll="true">
		<div class="item text-center commercewr-header">			
			<h2><strong>{{viewdata.commerce.Name}}</strong></h2>	
			<div>
				<img class="commercewr-avatar" src="{{GetAvatarImage(viewdata.commerce.Image)}}">
			</div>
			<div class="commercewr-gobtn" ng-click="OpenMaps(viewdata.commerce.LocationLatitude,viewdata.commerce.LocationLongitude)">
				<p class="commercewr-gobtn-text"><i class="icon-location" style="font-size:20px;"></i></p>
			</div>
			<div class="commercewr-storesbtn" ng-click="OpenStores()">
				<p class="commercewr-storesbtn-text">Tiendas</p>
			</div>		
		</div>
		<div class="item commercewr-detail-pops-item" style="padding:0">
			<div class="row">
				<div class="col">
					<div class="row">
						<div class="col commercewr-detail-title text-center"><strong>Mi Balance</strong></div>
					</div>
					<div class="row">
						<div class="col text-center">
							<strong class="commercewr-detail-balance commercewr-points">
								{{GetVal(viewdata.commerce.PointsAvailable)}}
							</strong>
						</div>
					</div>
				</div>
				<div class="col">
					<div class="row">
						<div class="col commercewr-detail-title text-center"><strong>Visitas</strong></div>
					</div>
					<div class="row">
						<div class="col text-center">
							<strong class="commercewr-detail-balance commercewr-points">
								{{GetVisitCount(viewdata.commerce)}}
							</strong>
						</div>
					</div>
				</div>
				<div class="col">
					<div class="row">
						<div class="col commercewr-detail-title text-center"><strong>Última Visita</strong></div>
					</div>
					<div class="row">
						<div class="col text-center">
							<strong class="commercewr-detail-balance commercewr-points item-text-wrap" ng-bind="GetLastVisitDate(viewdata.commerce)" style="font-size:16px;">								
							</strong>
						</div>
					</div>
				</div>
			</div>			
		</div>

		<div class="list">
			<div class="item item-text-wrap item-icon-left">
				<i class="icon icon-location"></i>
				<p>{{viewdata.commerce.Address}}</p>
			</div>
			<div class="item item-text-wrap item-icon-left">
				<i class="icon icon-mail"></i>
				<p>{{viewdata.commerce.Email}}</p>
			</div>
			<div class="item item-text-wrap item-icon-left">
				<i class="icon ion-ios-telephone-outline"></i>
				<p>{{viewdata.commerce.Phone}}</p>
			</div>
			<div class="item item-text-wrap item-icon-left">
				<i class="icon ion-social-facebook-outline"></i>
				<p>{{viewdata.commerce.FacebookPage}}</p>
			</div>
			<div class="item item-text-wrap item-icon-left">
				<i class="icon ion-social-twitter-outline"></i>
				<p>{{viewdata.commerce.TwitterPage}}</p>
			</div>
		</div>

		<ul class="list" style="margin-top:-21px; background-color:#eeeeee !important;" ng-show="viewdata.socialmediaapps.facebook || viewdata.socialmediaapps.twitter">
		    <div class="item item-divider commercewr-detail-title">
				<strong style="margin-left:5px">Compartir:</strong>
			</div>		
			<div class="item">
				<div class="row">
					<div ng-show="viewdata.socialmediaapps.facebook" class="col text-center commerce-social-fb-font" ng-click="ShareViaFacebook(viewdata.commerce)">
						<i class="ion-social-facebook"></i> facebook
					</div>
					<div ng-show="viewdata.socialmediaapps.twitter" class="col text-center commerce-social-twitter-font" ng-click="ShareViaTwitter(viewdata.commerce)">
						<i class="ion-social-twitter"></i> twitter
					</div>
				</div>
			</div>
		</ul>

		<div class="md-modal md-effect-7" id="modal-msgbox-login">
			<div class="md-content">
				<h3>{{viewdata.msgbox.title}}</h3>
				<div>
					<p>{{viewdata.msgbox.message}}</p>
					<button class="md-close">{{viewdata.msgbox.buttontext}}</button>
				</div>
			</div>
		</div>
		<div class="md-overlay"></div><!-- the overlay element -->

		<ul class="list" style="margin-top:-21px; background-color:#eeeeee !important;">
		    <div class="item item-divider commercewr-detail-title">
				<strong style="margin-left:5px">Premios</strong>
			</div>
			<li class="item" ng-show="viewdata.rewards.length == 0">
				No hay premios disponibles
			</li>
		    <li ng-show="viewdata.rewards.length > 0" class="item item-avatar item-icon-right item-text-wrap commercewr-detail-item" collection-repeat="item in viewdata.rewards | orderBy:'Points'" ng-click="OpenRewardDetail(item)">		    	
		    	<img ng-src="{{GetRewardImage(item.Image)}}">

		    	<div>
			    	<strong><h2 ng-bind="item.Name"></h2></strong>

			    	<p ng-show="viewdata.commerce.PointsAvailable >= item.Points">		    		
			    		¡¡Cuento con los suficientes <strong class="commercewr-popslabel">POPS</strong> para canjear!!
			    	</p>		    	
			    	<p ng-show="viewdata.commerce.PointsAvailable < item.Points">
			    		<strong ng-bind="GetAvailablePoints(viewdata.commerce.PointsAvailable)"></strong> de <strong ng-bind="item.Points"></strong> 
			    	</p>
			    	<p ng-show="!item.AvailableAllStores">
			    		Exclusivo para: <strong ng-bind="item.SubEntityName" class="commercewr-store-label"></strong>
			    	</p>
			    	<p>&nbsp;</p>
			    	
			    	<div ng-class="GetRewardsProgressClass(viewdata.commerce.PointsAvailable, item.Points)" ng-style="GetRewardProcessStyle(viewdata.commerce.PointsAvailable, item.Points)"></div>
		    	</div>

		    	<i class="icon" ng-class="GetPointsClass(viewdata.commerce.PointsAvailable, item.Points)" style="margin-right:5px;" ng-bind="item.Points"></i>		    	
		    </li>
		</ul>

		
	</ion-content>		
</ion-view>